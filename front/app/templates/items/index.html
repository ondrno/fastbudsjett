{% extends 'base.html' %}

{% block header %}
<div class="container-fluid">
  <form class="inputform needs-validation">
    <div class="form-row">
      <div class="form-group col-md-3">
        <label for="inputDate">Date</label>
        <input type="date" class="form-control" id="inputDate" required>
      </div>
      <div class="form-group col-md-2">
        <label for="inputPayment">Payment</label>
        <select id="inputPayment" class="form-control" required>
          {% for k, v in payments.items() -%}
          <option value="{{ k }}" {% if v.selected is true -%}selected{% endif %}>{{v.name.capitalize()}}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-2">
        <label for="inputAmount">Amount</label>
        <input type="text" class="form-control" id="inputAmount" placeholder="3.99" required>
      </div>
      <div class="form-group col-md-2">
        <label for="inputCategory">Category</label>
        <select id="inputCategory" class="form-control" required>
          {% for k, v in categories.items() -%}
          <option value="{{ k }}" {% if v.selected is true -%}selected{% endif %}>{{v.name.capitalize()}}</option>
          {% endfor %}
        </select>
      </div>
    </div>
      <!-- future extension: labels
      <div class="form-group col-md-4">
        <label for="inputDescription">Labels</label>
        <input type="text" class="form-control" id="inputLabels">
      </div> -->
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="inputDescription">Description</label>
        <input type="text" class="form-control" id="inputDescription" placeholder="Coop: bread, butter, milk" required autofocus>
      </div>
    </div>
    <button type="submit" class="btn btn-outline-success">Send</button>
    <button type="reset" class="btn btn-outline-success">Reset</button>

  </form>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
  <table id="itemsOverviewTable" class="table table-striped">
    <thead class="thead-light">
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Amount</th>
        <th scope="col">Description</th>
        <th scope="col">Category</th>
        <th scope="col">Payment</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.date }}</td>
        <td>{{ item.amount }}</td>
        <td>{{ item.description }}</td>
        <td>{{ item.category|capitalize }}</td>
        <td>{{ item.payment|capitalize }}</td>
        <td><button type="button" class="btn btn-sm btn-outline-success">edit</button></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

<script>

// Example starter JavaScript for disabling form submissions if there are invalid fields
(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.getElementsByClassName('needs-validation');
    // Loop over them and prevent submission
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();
</script>